import{d as e,g as l,u as a,h as n,e as t,r as s,a as o,b as r,_ as c,Y as i,$ as u,a0 as d,B as f,m as g}from"./vendor.0429b4fb.js";/* empty css              */const p=c.Item;var m=e({name:"Login",setup(){const e=l(),m=a(),v=n(),_={phone:[{required:!0,pattern:/^1[3|4|5|6|7|8|9][0-9]{9}$/,message:"请正确填写手机号",trigger:"blur"}],code:[{required:!0,pattern:/^[0-9]{6}$/,message:"请正确填写验证码",max:6,trigger:"blur"}]},{__env:h}=m.query,x=t({form:{phone:"dev"===h?"18268125970":"",code:"dev"===h?"656565":""},timer:null,counting:null}),b=s(),y=async()=>{g.success("验证码发送成功！"),x.counting=60,x.timer=setInterval((()=>{x.counting-=1,0===x.counting&&(clearInterval(x.timer),x.timer=null)}),1e3)},E=async()=>{b.value.validate().then((async()=>{if(await e.dispatch("user/login",x.form)){const e="/Welcome",{BASE_URL:l}={VITE_APP_ENV:"prod",BASE_URL:"/v3-backend-tpl/",MODE:"production",DEV:!1,PROD:!0};v.replace({path:e.replace(l,"/")})}})).catch((e=>{console.log(e)}))};return()=>o("div",{class:"login flex f-fd-c f-ai-c f-jc-c"},[o("div",{class:"login_content flex  f-ai-c  f-fd-c"},[o("div",{class:"login_content_top flex f-ai-c"},[o("img",{src:"/favicon.ico",alt:"玩物得志"},null),o("div",{class:"login_title"},[r("vue3后台模板")])]),o("p",{class:"title_next"},[r("后台管理模板")]),o("div",{class:"login_content_form"},[o(c,{ref:b,model:x.form,rules:_},{default:()=>[o(p,{name:"phone"},{default:()=>[o(i,{class:"form_input",value:x.form.phone,size:"large",placeholder:"请输入手机号",maxlength:11,onInput:e=>{x.form.phone=e.target.value.replace(/[^\d]/g,"")},style:{width:"400px"}},{prefix:()=>o(u,{style:{color:"rgba(159, 159, 159, 0.85)"}},null)})]}),o(p,{name:"code"},{default:()=>[o("div",{class:"flex f-jc-sb"},[o(i,{class:"form_input_valid",value:x.form.code,size:"large",placeholder:"请输入验证码",maxlength:6,onInput:e=>{x.form.code=e.target.value.replace(/[^\d]/g,"")}},{prefix:()=>o(d,{style:{color:"rgba(159, 159, 159, 0.85)"}},null)}),o(f,{size:"large",onClick:y,disabled:x.counting>0||!x.form.phone},{default:()=>[x.counting>0?o("span",null,[x.counting,r("秒后重试")]):o("span",null,[r("获取验证码")])]})])]}),o(p,null,{default:()=>[o("div",{class:"flex",style:{marginTop:"20px"}},[o(f,{size:"large",class:"action_btn",onClick:E},{default:()=>[r("登录")]})])]})]})])])])}});export{m as default};
