var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,o=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&d(e,t,a[t]);if(r)for(var t of r(a))s.call(a,t)&&d(e,t,a[t]);return e},n=(e,r)=>a(e,t(r));"undefined"!=typeof require&&require;import{l as i,f as p,m as c,d as u,r as y,u as b,h as m,e as h,O as f,a as x,b as v,Q as w,j as T,v as g,V as I,X as D,Y as O,Z as j}from"./vendor.0429b4fb.js";/* empty css              */import{t as N}from"./tableTpl.2176d6d6.js";const k=[{title:"交接单号",dataIndex:"handoverNumber",width:200},{title:"发货物流商",dataIndex:"expressCompanyTypeDesc",width:120},{title:"交接状态",dataIndex:"handoverTypeDesc",width:120},{title:"创建人",dataIndex:"createUserName",width:100},{title:"创建时间",dataIndex:"created",width:200},{title:"发货人",dataIndex:"deliverUserName",width:100},{title:"发货时间",dataIndex:"deliverTime",width:200},{title:"总包裹数",dataIndex:"expressCount",width:100},{title:"总件数",dataIndex:"totalCount",width:100}],C=({queryTable:e,operaType:a}={})=>{const t=[{title:"序号",dataIndex:"customIdx",width:100},{title:"交接状态",dataIndex:"handoverTypeDesc",width:120},{title:"交接单号",dataIndex:"handoverNumber",width:200},{title:"创建人",dataIndex:"createUserName",width:100},{title:"创建时间",dataIndex:"created",width:200}];return"deliver"===a&&t.push({title:"操作",key:"operation",dataIndex:"operation",dataType:"operation",width:100,fixed:"right",operates:[{text:"删除",compProps:{ghost:!0,danger:!0},onClick:async(a={})=>{const{handoverNumber:t}=a;p.confirm({content:`确认将${t}删除出交接单吗`,okType:"danger",onOk:async()=>{c.success("删除成功"),null==e||e()}})}}]}),t};var P=u({name:"Detail",props:{operaType:{type:String,required:!0}},setup(e){const a=y(),t=b(),r=m(),{handoverId:l}=t.query,s=h({params:{handoverId:l,page:1,size:10},expressNumber:"",tableData:{detailTotal:0,baseTableBody:[],detailTableBody:[]}}),d=(e={})=>{s.params=o(o({},s.params),e)},u=()=>{(async(e={})=>{d(e);const a=N.data,{dataList:t=[]}=a;s.tableData=n(o({},s.tableData),{baseTableBody:t})})(),(async(e={})=>{d(e);const a=N.data,{dataList:t=[],total:r=0}=a;s.tableData=n(o({},s.tableData),{detailTotal:r,detailTableBody:t})})()},P=e=>{d({page:e.current,size:e.pageSize}),u()},S=async()=>{try{if(!s.expressNumber)return void c.error("请输入");c.success("操作成功"),u()}catch(e){((e,a)=>{const t=i.exports.get(e,"value.focus"),r=i.exports.get(e,"value.select");"function"==typeof t&&e.value.focus(),a&&"function"==typeof r&&e.value.select()})(a,!0)}},z=()=>{p.confirm({content:"确认将交接单 1111 关闭吗?",onOk:async()=>{c.success("操作成功"),u()}})};return f((()=>{u()})),()=>x("section",{class:"pb20"},[x("h3",{class:"item-card pt20"},[v("基础信息")]),x(w,{columns:k,dataSource:s.tableData.baseTableBody,rowSelection:null,scroll:{x:"110%"},additionProps:{rowKey:"id",pagination:!1}},null),T(x(I,{align:"middle",class:"item-card pt20"},{default:()=>[x(D,null,{default:()=>[x("h2",{class:"mb0"},[v("物流单号：")])]}),x(D,null,{default:()=>[x(O,{style:{width:"440px"},ref:a,autofocus:!0,allowClear:!0,size:"large",value:s.expressNumber,"onUpdate:value":e=>s.expressNumber=e,placeholder:"请输入物流单号",onPressEnter:S},null),x(j,{size:"large",type:"primary",onClick:S},{default:()=>[v("交接")]})]})]}),[[g,"deliver"===e.operaType]]),x("h3",{class:"item-card pt20"},[v("明细列表")]),x(w,{columns:C({handoverId:l,queryTable:u,operaType:e.operaType}),dataSource:s.tableData.detailTableBody,rowSelection:null,scroll:{x:!0},pagination:{total:s.tableData.detailTotal,current:s.params.page,pageSize:s.params.size},additionProps:{rowKey:"id",onChange:P}},null),x(I,{justify:"center",class:"pt20"},{default:()=>[T(x(j,{danger:!0,class:"mr10",onClick:z},{default:()=>[v("关闭")]}),[[g,"deliver"===e.operaType]]),x(j,{onClick:()=>{r.back()}},{default:()=>[v("返回")]})]})])}});export{P as default};
